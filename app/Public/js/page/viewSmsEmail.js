/**  * kuaihuojian project - kuaihuojian project  */ "use strict";function ViewSmsEmail(i){var e="";e+="<style>",e+='.smsEmailLoading {position: absolute;top: 0;left: 0;width: 100%;height: 100%;background: url("/Public/image/common/loading.gif") scroll no-repeat center center transparent;z-index: 103;}',e+=".SmsEmailBgBox { display: none; position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, .5); z-index: 103; /*opacity:0; -webkit-transition: all 2s linear;transition: all 2s linear; */}",e+=".SmsEmailBgBox .modifyViewBtn {display:inline-block;width: 150px; height: 40px; color: #666; font-size: 16px; text-align: center; line-height: 40px; background-color: #e5e5ea; cursor: pointer; }",e+=".SmsEmailBgBox .closeViewBtn {display:inline-block;width: 150px; height: 40px; color: #fff; font-size: 16px; text-align: center; line-height: 40px; background-color: #38f; cursor: pointer; }",e+='.viewMobile { display: none; position: relative; left: 50%; top: 50%; width: 270px; height: 560px; margin-left: -135px; margin-top: -300px; background: url("/Public/image/page/viewSmsEmail/view_mobile.png") scroll no-repeat 0 0 transparent; overflow: hidden; }',e+=".viewMobileInfo { position: relative; width: 209px; margin: 120px 0 0 30px; padding: 10px 10px 15px; font-size: 12px; box-sizing: border-box; line-height: 16px; word-wrap: break-word; word-break: break-all; background-color: #e5e5ea; border-radius: 10px; max-height: 319px; overflow: hidden; }",e+='.viewMobileInfo:before { position: absolute; left: -6px; bottom: -1px; width: 18px; height: 18px; content: ""; background: url("/Public/image/page/viewSmsEmail/dx_rb.png") scroll no-repeat 0 0 transparent; }',e+=".viewMobileBtn, .viewEmailBtn {position: absolute; bottom: 30px; left:0; width: 100%; height: 40px; color: #666; font-size: 0; text-align: center;}",e+=".viewMobileBtn .modifyViewBtn,.viewMobileBtn .closeViewBtn { width: 77px; height: 30px; font-size: 14px;line-height: 30px;border-radius: 3px; }",e+=".viewMobileBtn .modifyViewBtn, .viewEmailBtn .modifyViewBtn {margin-right:10px;}",e+='.viewEmail { display: none; position: relative; left: 50%; top: 50%; width: 829px; height: 580px; margin-left: -415px; margin-top: -290px; background: url("/Public/image/view_email.png") scroll no-repeat 0 0 transparent; overflow: hidden; }',e+=".viewEmailInfo { position: relative; width: 673px; height: 400px; margin: 98px 0px 0 156px; }",e+=".viewEmailInfo .title { position: relative; width: 100%; height: 46px; font-size: 16px; line-height: 40px; word-wrap: break-word; word-break: break-all; overflow: hidden; }",e+=".viewEmailInfo .content { position: relative; width: 100%; height: 350px; padding: 10px; margin-top: 5px; font-size: 12px; line-height: 14px; word-wrap: break-word; word-break: break-all; overflow: auto; box-sizing: border-box; }",e+="</style>",$("head").append(e);var t="";t+='<div id="SmsEmailBgBox" class="SmsEmailBgBox">',t+='  <div id="viewMobile" class="viewMobile">',t+='    <div class="viewMobileInfo"></div>',t+='    <div class="viewMobileBtn">',t+='       <div class="modifyViewBtn" orderid="2094" stateid="1">修改计划</div>',t+='       <div class="closeViewBtn">退出预览</div>',t+="    </div>",t+="  </div>",t+='  <div id="viewEmail" class="viewEmail">',t+='    <div class="viewEmailInfo">',t+='     <div class="title"></div>',t+='      <div class="content"></div>',t+="    </div>",t+='    <div class="viewEmailBtn">',t+='       <div class="modifyViewBtn" orderid="2094" stateid="1">修改计划</div>',t+='       <div class="closeViewBtn">退出预览</div>',t+="    </div>",t+="  </div>",t+='  <div id="smsEmailLoading" class="smsEmailLoading"></div>',t+="</div>",$("body").append(t);var o=this;o.SmsEmailBgBox=$("#SmsEmailBgBox"),o.viewMobile=$("#viewMobile"),o.viewMobileInfo=o.viewMobile.find(".viewMobileInfo"),o.viewEmail=$("#viewEmail"),o.title=o.viewEmail.find(".title"),o.content=o.viewEmail.find(".content");var a=o.SmsEmailBgBox.find(".modifyViewBtn");a.hide(),a.click(function(){var i=a.attr("orderid"),e=a.attr("stateid");e==-1||0==e||1==e?window.location.href="/EditPlan/edit/order_id/"+i+"/order_status/"+e+"?redirect="+http_referer:alert("当前状态订单不可以修改！")});var n=o.SmsEmailBgBox.find(".closeViewBtn");n.click(function(){o.SmsEmailBgBox.hide(),o.viewMobile.hide(),o.viewEmail.hide(),a.hide()})}function SaleViewSmsEmailDecorator(){this.viewSmsEmail=null,this.smsEmailLoading=null}function alertMsg(i,e,t,o){saleViewSmsEmailDecorator.openSMS(e,t,o),i=window.event||i,i.cancelBubble=!1,i.stopPropagation()}function alertMail(i,e,t,o){saleViewSmsEmailDecorator.openEmail(e,t,o),i=window.event||i,i.cancelBubble=!1,i.stopPropagation()}function SpreadViewSmsEmailDecorator(){this.viewSmsEmail=null,this.smsEmailLoading=null}function alertMsgSpread(i,e){spreadViewSmsEmailDecorator.openSMS(i,e)}function alertMailSpread(i,e){spreadViewSmsEmailDecorator.openEmail(i,e)}ViewSmsEmail.prototype={constructor:ViewSmsEmail,openSMS:function(){this.SmsEmailBgBox.show(),this.viewMobile.show()},openEmail:function(){this.SmsEmailBgBox.show(),this.viewEmail.show()},setSmsContent:function(i){this.viewMobileInfo.html(i)},setEmailContent:function(i,e){this.title.html(i),this.content.html(e)}},SaleViewSmsEmailDecorator.prototype={constructor:SaleViewSmsEmailDecorator,init:function(){return this.viewSmsEmail||(this.viewSmsEmail=new ViewSmsEmail,this.smsEmailLoading=new DialogLoading("#smsEmailLoading")),this.viewSmsEmail},openSMS:function(i,e,t){if(!i)return void alert("模板已被删除!");if(!clockSubmit.init()){var o=this;o.init(),o.viewSmsEmail.openSMS(),e=e?e:0,o.smsEmailLoading.post({url:"/Template/viewMsgTpl",data:{tpl_id:i,cust_id:t,sub_id:e},success:function(i){i.state?o.viewSmsEmail.setSmsContent(i.data.content):alert("模板已被删除!")}})}},openEmail:function(i,e,t){if(!i)return void alert("模板已被删除!");if(!clockSubmit.init()){var o=this;o.init(),o.viewSmsEmail.openEmail(),e=e?e:0,o.smsEmailLoading.post({url:"/Template/viewEmailTpl",data:{tpl_id:i,cust_id:t,sub_id:e},success:function(i){i.state?o.viewSmsEmail.setEmailContent(i.data.subject,i.data.content):alert("模板已被删除!")}})}}};var saleViewSmsEmailDecorator=new SaleViewSmsEmailDecorator;SpreadViewSmsEmailDecorator.prototype={constructor:SpreadViewSmsEmailDecorator,init:function(){return this.viewSmsEmail||(this.viewSmsEmail=new ViewSmsEmail((!0)),this.smsEmailLoading=new DialogLoading("#smsEmailLoading")),this.viewSmsEmail},openSMS:function(i,e){if(!clockSubmit.init()){var t=this;t.init(),t.viewSmsEmail.openSMS(),t.smsEmailLoading.post({url:"/SpreadPlan/ajax_get_tempinfo",data:{order_id:i},success:function(o){var a=o.msg;t.viewSmsEmail.setSmsContent(a),$(".modifyViewBtn").attr({orderId:i,stateId:e}).toggle(!!o.isChangeable)}})}},openEmail:function(i,e){if(!clockSubmit.init()){var t=this;t.init(),t.viewSmsEmail.openEmail(),t.smsEmailLoading.post({url:"/SpreadPlan/ajax_get_tempinfo",data:{order_id:i},success:function(o){t.viewSmsEmail.setEmailContent(o.subject,o.email),$(".modifyViewBtn").attr({orderId:i,stateId:e}).toggle(!!o.isChangeable)}})}}};var spreadViewSmsEmailDecorator=new SpreadViewSmsEmailDecorator;