/**  * kuaihuojian project - kuaihuojian project  */ "use strict";function modifyPlanCallBack(){window.location.href="/EditPlan/edit/order_id/"+orderId+"/order_status/0?redirect="+http_referer}function ajax_get_page(e,a,t){a||(a=1),"select"==t&&(a=1),$("#Pagination").pager({id:"#searchinfos",template:"#handlebar-template",url:"/SpreadPlan/ajax_get_orderstatus_num",data:{page:a,orderids:e}})}function commitOrders(e){$.ajax({url:"/NewProject/commitOrder",type:"post",data:"orderId="+e,success:function(a){a.code&&(e=a.orderId,a.payStatus?$("#payPlanSuccessDialog").dialog("open"):($("#payPlanSuccessDialog").dialog("open"),orderMoney=a.orderMoney,$("#errtips").html(a.content),$("#payPlanErrorDialog").dialog("open")))}})}function if_enought(e){orderId=e,$.ajax({url:"/PayOrder/if_enougnt",type:"post",data:"orderId="+e,dataType:"json",success:function(e){var a=e.data;$(".send_num").html(a.send_num),$(".sms_count").html(a.msgCount),$(".totalMoney").html(a.payinfo),e.status?$("#payPlanSuccessDialog").dialog("open"):$("#payPlanErrorDialog").dialog("open")}})}$(function(){var e=$("#totalPlan").val(),a=$("#now_page").val();a||(a=1),e&&ajax_get_page(e,a),$(".closeViewBtn").click(function(){$("#bgBox").hide()}),$(".modifyViewBtn").click(function(){var e=$(".modifyViewBtn").attr("orderid"),a=$(".modifyViewBtn").attr("stateid");a==-1||0==a||1==a?window.location.href="/EditPlan/edit/order_id/"+e+"/order_status/"+a+"?redirect="+http_referer:alert("当前状态订单不可以修改！")})}),$(function(){$("#checkPlanSelect").selectUI({width:150,height:30,addClass:"checkPlanSelect",after:function(e){var a=$(e).attr("value"),t=$("#now_page").val()||1;return ajax_get_page(a,t,"select"),!0}})});var orderId;$("#payPlanErrorDialog").dialog({autoOpen:!1,width:790,height:550,modal:!0,title:"本次推送预计费用",buttons:[{text:"修改计划",click:function(){$("#isCommit").val("0"),$(this).dialog("close"),"undefined"!=typeof modifyPlanCallBack&&modifyPlanCallBack()}},{text:"去充值",click:function(){window.location.href="/Vouchers/useVoucher?orderid="+orderId}}]}),$("#payPlanSuccessDialog").dialog({autoOpen:!1,width:790,height:550,modal:!0,title:"本次推送预计费用",buttons:[{text:"修改计划",click:function(){$("#isCommit").val("0"),$(this).dialog("close"),"undefined"!=typeof modifyPlanCallBack&&modifyPlanCallBack()}},{text:"确认付款",click:function(){$.ajax({url:"/PayOrder/index",type:"post",data:"orderId="+orderId,success:function(e){var a=promptDialog(e.msg,{ok:function(){window.location.href="/SpreadPlan/index"},OKText:"关闭"});window.setTimeout(function(){a.dialog("close"),window.location.href="/SpreadPlan/index"},3e3)}})}}]});