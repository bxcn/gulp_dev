/**  * kuaihuojian project - kuaihuojian project  */ "use strict";$(function(){$("#modifyPwdDialog").dialog({width:660,height:400,title:"修改密码",buttons:[{text:"取消",click:function(){$(this).dialog("close")}},{text:"修改",click:function(){$("#modifyUserPassWord").submit()}}]}),$("#modifyPwd").click(function(){$("#modifyPwdDialog").find("input").val(""),$("#modifyPwdDialog").dialog("open")});$("#modifyUserPassWord").validate({rules:{opwd:{required:!0,password:!0,unequalTo:"#newPwd"},npwd:{required:!0,password:!0},repwd:{required:!0,password:!0,equalTo:"#newPwd"}},messages:{opwd:{required:"请输入内容",password:"密码(6-16字母、数字、无空格)",unequalTo:"新密码与原密码一致"},npwd:{required:"请输入内容",password:"密码(6-16字母、数字、无空格)"},repwd:{required:"请输入内容",password:"密码(6-16字母、数字、无空格)",equalTo:"新密码与确认密码不一致"}},submitHandler:function(e){var i=$("#modifyUserPassWord"),a={opwd:md5($.trim(i.find('input[name="opwd"]').val())),npwd:md5($.trim(i.find('input[name="npwd"]').val())),repwd:md5($.trim(i.find('input[name="repwd"]').val()))};ajaxData.ajax({url:MODIFYPWDDO_URL,type:"post",data:a,success:function(e){1==e.code?($("#modifyPwdDialog").dialog("close"),alert("修改成功")):alert(e.message)},error:function(){alert("修改失败")}})}});$("#modifyMobileDialog").dialog({autoOpen:!1,width:660,height:400,resizable:!1,draggable:!1,modal:!0,title:"修改手机",buttons:[{text:"取消",click:function(){$("#modifyMobileDialog").dialog("close")}},{text:"修改",click:function(){$("#modifyMobileForm").submit()}}]}),$("#modifyMobile").click(function(){var e=$.trim($("#mobilephone").val());$("#oldMobile").html(e),$("#modifyMobileDialog").find("input").val(""),$("#modifyMobileDialog").dialog("open")});$("#modifyMobileForm").validate({rules:{mobile:{required:!0,mobile:!0},validcode:{required:!0,integer:!0}},messages:{mobile:{required:"请输入内容",mobile:"新手机号格式不正确"},validcode:{required:"请输入内容",integer:"短信验证码输入格式不正确"}},submitHandler:function(e){var i=$("#modifyMobileForm").serialize();ajaxData.ajax({url:MODIFYMOBILEDO_URL,type:"post",data:i,success:function(e){1==e.code?($("#mobilephone").val($("#newMobile").val()),$("#modifyMobileDialog").dialog("close"),alert(e.message)):e.code==-1?alert(e.message):alert("服务器忙")},error:function(){alert("修改失败")}})}});$("#pushYzm").click(function(){var e=$("#newMobile").val();ajaxData.ajax({url:PUSH_MOBILE_CODE_URL,data:"mobilephone="+e,type:"post",success:function(e){if(1==e.code)var i=$("#pushYzm").hide(),a=$("#pushTime").show(),o=59,r=window.setInterval(function(){a.html("剩"+o+"秒"),o<=0&&(i.show(),a.hide(),window.clearInterval(r)),o--},1e3);else e.code==-1?alert(e.message):alert("服务器忙")},error:function(){alert("发送失败")}})});var e=($("#modifyUserInfo").validate({rules:{realname:{required:!0,linkman:!0},sex:{required:!0,sex:!0},email:{required:!0,email:!0}},messages:{realname:{required:"请输入内容",linkman:"联系人格式不正确"},sex:{required:"请输入内容",sex:"请选择性别"},email:{required:"请输入内容",email:"邮箱格式不正确"}},submitHandler:function(e){var i=$("#modifyUserInfo").serialize();ajaxData.ajax({url:UPDATEUSERINFO_URL,type:"post",data:i,success:function(e){1==e.code||e.code==-1?alert(e.message):alert("服务器忙")},error:function(){alert("修改失败")}})}}),$("#modifyCompanyInfoForm").validate({submitHandler:function(e){var i=$('input[name="msgsign"]').val(),a=$('select[name="sizeid"]').find("option:selected").val(),o=$('input[name="product"]').val(),r=$('select[name="province"]').find("option:selected").val(),l=$('select[name="city"]').find("option:selected").val(),t=$('select[name="tradeid"]').find("option:selected").val();if(a==-1)return void alert("请选择公司规模");if(t==-1)return void alert("请选择行业");if(r==-1)return void alert("请选择省份");if(l==-1)return void alert("请选择城市");var d={msgsign:i,sizeid:a,product:o,province:r,city:l,tradeid:t};ajaxData.ajax({url:UPDATECOMPANYINFO_URL,type:"post",data:d,success:function(e){1==e.code||e.code==-1?alert(e.message):alert("服务器忙")},error:function(){alert("修改失败")}})}}),$("#number"));$(".minus").click(function(){var i=e.val(),a=+i;if(a==i){if(a<=1)return;e.val(a-1)}}),$(".plus").click(function(){var i=e.val(),a=+i;if(a==i){if(a>=9999999)return;e.val(a+1)}}),e.keyup(function(){var e=$(this),i=+e.val();i<1&&(e.val(1),i=1)})});